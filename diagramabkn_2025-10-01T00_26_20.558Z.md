# diagramabkn documentation
## Summary

- [Introduction](#introduction)
- [Database Type](#database-type)
- [Table Structure](#table-structure)
	- [item](#item)
	- [sede](#sede)
	- [item_existencia](#item_existencia)
	- [usuario](#usuario)
	- [sugerencia](#sugerencia)
	- [notificacion](#notificacion)
	- [solicitud](#solicitud)
	- [item_solicitud](#item_solicitud)
	- [prestamo](#prestamo)
	- [atraso](#atraso)
	- [multa](#multa)
	- [ventana](#ventana)
	- [lista_espera](#lista_espera)
	- [configuracion_sistema](#configuracion_sistema)
- [Relationships](#relationships)
- [Database Diagram](#database-diagram)

## Introduction

## Database type

- **Database system:** MySQL
## Table structure

### item

| Name        | Type          | Settings                      | References                    | Note                           |
|-------------|---------------|-------------------------------|-------------------------------|--------------------------------|
| **id** | BIGINT | ðŸ”‘ PK, not null, unique, autoincrement |  | |
| **nombre** | VARCHAR(50) | not null |  | |
| **cantidad** | INTEGER | not null |  | |
| **tipo** | VARCHAR(20) | not null |  | |
| **valor** | DECIMAL(10,2) | not null |  | |
| **tarifa_atraso** | DECIMAL(10,2) | not null |  | |
| **descripcion** | VARCHAR(100) | not null |  | |
| **cantidad_max** | INTEGER | not null |  | |
| **registro_instante** | DATETIME | not null |  | | 


#### Indexes
| Name | Unique | Fields |
|------|--------|--------|
| itemIDX1 |  | nombre, tipo |
### sede

| Name        | Type          | Settings                      | References                    | Note                           |
|-------------|---------------|-------------------------------|-------------------------------|--------------------------------|
| **id** | BIGINT | ðŸ”‘ PK, not null, unique, autoincrement |  | |
| **nombre** | VARCHAR(50) | not null |  | | 


### item_existencia

| Name        | Type          | Settings                      | References                    | Note                           |
|-------------|---------------|-------------------------------|-------------------------------|--------------------------------|
| **id** | BIGINT | ðŸ”‘ PK, not null, unique, autoincrement |  | |
| **item_id** | BIGINT | not null | fk_item_existencia_item_id_item | |
| **sede_id** | BIGINT | not null | fk_item_existencia_sede_id_sede | |
| **codigo** | VARCHAR(50) | not null, unique |  | |
| **estado** | VARCHAR(20) | not null |  | |
| **registro_instante** | DATETIME | not null |  | | 


#### Indexes
| Name | Unique | Fields |
|------|--------|--------|
| item_existenciaIDX1 |  | item_id |
### usuario

| Name        | Type          | Settings                      | References                    | Note                           |
|-------------|---------------|-------------------------------|-------------------------------|--------------------------------|
| **id** | BIGINT | ðŸ”‘ PK, not null, unique, autoincrement |  | |
| **nombre** | VARCHAR(50) | not null |  | |
| **correo** | VARCHAR(50) | not null, unique |  | |
| **tipo** | VARCHAR(20) | not null |  | |
| **telefono** | VARCHAR(15) | not null |  | |
| **estado** | VARCHAR(20) | not null |  | |
| **preferencias_notificacion** | INTEGER | not null, default: 0 |  | |
| **registro_instante** | DATETIME | not null |  | | 


#### Indexes
| Name | Unique | Fields |
|------|--------|--------|
| usuarioIDX1 |  | nombre |
### sugerencia

| Name        | Type          | Settings                      | References                    | Note                           |
|-------------|---------------|-------------------------------|-------------------------------|--------------------------------|
| **id** | BIGINT | ðŸ”‘ PK, not null, unique, autoincrement |  | |
| **usuario_id** | BIGINT | not null | fk_sugerencia_usuario_id_usuario | |
| **sugerencia** | VARCHAR(100) | not null |  | |
| **estado** | VARCHAR(20) | not null |  | |
| **registro_instante** | DATETIME | not null |  | | 


### notificacion

| Name        | Type          | Settings                      | References                    | Note                           |
|-------------|---------------|-------------------------------|-------------------------------|--------------------------------|
| **id** | BIGINT | ðŸ”‘ PK, not null, unique, autoincrement |  | |
| **usuario_id** | BIGINT | not null | fk_notificacion_usuario_id_usuario | |
| **canal** | VARCHAR(20) | not null |  | |
| **tipo** | VARCHAR(20) | not null |  | |
| **mensaje** | TEXT | not null |  | |
| **registro_instante** | DATETIME | not null |  | | 


#### Indexes
| Name | Unique | Fields |
|------|--------|--------|
| notificacionIDX1 |  | usuario_id |
### solicitud

| Name        | Type          | Settings                      | References                    | Note                           |
|-------------|---------------|-------------------------------|-------------------------------|--------------------------------|
| **id** | BIGINT | ðŸ”‘ PK, not null, unique, autoincrement |  | |
| **usuario_id** | BIGINT | not null | fk_solicitud_usuario_id_usuario | |
| **tipo** | VARCHAR(30) | not null |  | |
| **estado** | VARCHAR(20) | not null |  | |
| **registro_instante** | DATETIME | not null |  | | 


#### Indexes
| Name | Unique | Fields |
|------|--------|--------|
| solicitudIDX1 |  | usuario_id |
### item_solicitud

| Name        | Type          | Settings                      | References                    | Note                           |
|-------------|---------------|-------------------------------|-------------------------------|--------------------------------|
| **solicitud_id** | BIGINT | ðŸ”‘ PK, not null | fk_item_solicitud_solicitud_id_solicitud | |
| **item_id** | BIGINT | ðŸ”‘ PK, not null | fk_item_solicitud_item_id_item | |
| **cantidad** | INTEGER | not null |  | |
| **registro_instante** | DATETIME | not null |  | | 


#### Indexes
| Name | Unique | Fields |
|------|--------|--------|
| item_solicitudIDX1 |  | item_id |
### prestamo

| Name        | Type          | Settings                      | References                    | Note                           |
|-------------|---------------|-------------------------------|-------------------------------|--------------------------------|
| **id** | BIGINT | ðŸ”‘ PK, not null, unique, autoincrement |  | |
| **item_existencia_id** | BIGINT | not null | fk_prestamo_item_existencia_id_item_existencia | |
| **solicitud_id** | BIGINT | not null | fk_prestamo_solicitud_id_solicitud | |
| **fecha_prestamo** | DATETIME | not null |  | |
| **fecha_devolucion** | DATETIME | not null |  | |
| **comentario** | TEXT | not null |  | |
| **estado** | VARCHAR(20) | not null |  | |
| **renovaciones_realizadas** | INTEGER | not null, default: 0 |  | |
| **registro_instante** | DATETIME | not null |  | | 


#### Indexes
| Name | Unique | Fields |
|------|--------|--------|
| prestamoIDX1 |  | item_existencia_id |
### atraso

| Name        | Type          | Settings                      | References                    | Note                           |
|-------------|---------------|-------------------------------|-------------------------------|--------------------------------|
| **id** | BIGINT | ðŸ”‘ PK, not null, unique, autoincrement |  | |
| **prestamo_id** | BIGINT | not null | fk_atraso_prestamo_id_prestamo | |
| **dias_atraso** | INTEGER | not null |  | |
| **estado** | VARCHAR(20) | not null |  | |
| **registro_instante** | DATETIME | not null |  | | 


#### Indexes
| Name | Unique | Fields |
|------|--------|--------|
| atrasoIDX1 |  | prestamo_id |
### multa

| Name        | Type          | Settings                      | References                    | Note                           |
|-------------|---------------|-------------------------------|-------------------------------|--------------------------------|
| **id** | BIGINT | ðŸ”‘ PK, not null, unique, autoincrement |  | |
| **prestamo_id** | BIGINT | not null | fk_multa_prestamo_id_prestamo | |
| **motivo** | VARCHAR(20) | not null |  | |
| **valor** | DECIMAL(10,2) | not null |  | |
| **estado** | VARCHAR(20) | not null |  | |
| **registro_instante** | DATETIME | not null |  | | 


#### Indexes
| Name | Unique | Fields |
|------|--------|--------|
| multaIDX1 |  | prestamo_id |
### ventana

| Name        | Type          | Settings                      | References                    | Note                           |
|-------------|---------------|-------------------------------|-------------------------------|--------------------------------|
| **id** | BIGINT | ðŸ”‘ PK, not null, unique, autoincrement |  | |
| **solicitud_id** | BIGINT | not null | fk_ventana_solicitud_id_solicitud | |
| **item_existencia_id** | BIGINT | not null | fk_ventana_item_existencia_id_item_existencia | |
| **inicio** | DATETIME | not null |  | |
| **fin** | DATETIME | not null |  | | 


### lista_espera

| Name        | Type          | Settings                      | References                    | Note                           |
|-------------|---------------|-------------------------------|-------------------------------|--------------------------------|
| **id** | BIGINT | ðŸ”‘ PK, not null, unique, autoincrement |  | |
| **solicitud_id** | BIGINT | not null | fk_lista_espera_solicitud_id_solicitud | |
| **item_id** | BIGINT | not null | fk_lista_espera_item_id_item | |
| **fecha_ingreso** | DATETIME | not null |  | |
| **estado** | VARCHAR(20) | not null |  | |
| **registro_instante** | DATETIME | not null |  | | 


#### Indexes
| Name | Unique | Fields |
|------|--------|--------|
| lista_esperaIDX3 |  | fecha_ingreso |
### configuracion_sistema

| Name        | Type          | Settings                      | References                    | Note                           |
|-------------|---------------|-------------------------------|-------------------------------|--------------------------------|
| **id** | BIGINT | ðŸ”‘ PK, not null, unique, autoincrement |  | |
| **clave** | VARCHAR(50) | not null, unique |  | |
| **valor** | VARCHAR(100) | not null |  | |
| **descripcion** | TEXT | not null |  | |
| **registro_instante** | DATETIME | not null |  | | 


## Relationships

- **item_existencia to item**: many_to_one
- **item_existencia to sede**: many_to_one
- **sugerencia to usuario**: many_to_one
- **notificacion to usuario**: many_to_one
- **solicitud to usuario**: many_to_one
- **item_solicitud to solicitud**: many_to_one
- **item_solicitud to item**: many_to_one
- **prestamo to item_existencia**: many_to_one
- **prestamo to solicitud**: many_to_one
- **atraso to prestamo**: one_to_one
- **multa to prestamo**: one_to_one
- **ventana to solicitud**: many_to_one
- **ventana to item_existencia**: many_to_one
- **lista_espera to solicitud**: many_to_one
- **lista_espera to item**: many_to_one

## Database Diagram

```mermaid
erDiagram
	item_existencia }o--|| item : references
	item_existencia }o--|| sede : references
	sugerencia }o--|| usuario : references
	notificacion }o--|| usuario : references
	solicitud }o--|| usuario : references
	item_solicitud }o--|| solicitud : references
	item_solicitud }o--|| item : references
	prestamo }o--|| item_existencia : references
	prestamo }o--|| solicitud : references
	atraso ||--|| prestamo : references
	multa ||--|| prestamo : references
	ventana }o--|| solicitud : references
	ventana }o--|| item_existencia : references
	lista_espera }o--|| solicitud : references
	lista_espera }o--|| item : references

	item {
		BIGINT id
		VARCHAR(50) nombre
		INTEGER cantidad
		VARCHAR(20) tipo
		DECIMAL(10,2) valor
		DECIMAL(10,2) tarifa_atraso
		VARCHAR(100) descripcion
		INTEGER cantidad_max
		DATETIME registro_instante
	}

	sede {
		BIGINT id
		VARCHAR(50) nombre
	}

	item_existencia {
		BIGINT id
		BIGINT item_id
		BIGINT sede_id
		VARCHAR(50) codigo
		VARCHAR(20) estado
		DATETIME registro_instante
	}

	usuario {
		BIGINT id
		VARCHAR(50) nombre
		VARCHAR(50) correo
		VARCHAR(20) tipo
		VARCHAR(15) telefono
		VARCHAR(20) estado
		INTEGER preferencias_notificacion
		DATETIME registro_instante
	}

	sugerencia {
		BIGINT id
		BIGINT usuario_id
		VARCHAR(100) sugerencia
		VARCHAR(20) estado
		DATETIME registro_instante
	}

	notificacion {
		BIGINT id
		BIGINT usuario_id
		VARCHAR(20) canal
		VARCHAR(20) tipo
		TEXT mensaje
		DATETIME registro_instante
	}

	solicitud {
		BIGINT id
		BIGINT usuario_id
		VARCHAR(30) tipo
		VARCHAR(20) estado
		DATETIME registro_instante
	}

	item_solicitud {
		BIGINT solicitud_id
		BIGINT item_id
		INTEGER cantidad
		DATETIME registro_instante
	}

	prestamo {
		BIGINT id
		BIGINT item_existencia_id
		BIGINT solicitud_id
		DATETIME fecha_prestamo
		DATETIME fecha_devolucion
		TEXT comentario
		VARCHAR(20) estado
		INTEGER renovaciones_realizadas
		DATETIME registro_instante
	}

	atraso {
		BIGINT id
		BIGINT prestamo_id
		INTEGER dias_atraso
		VARCHAR(20) estado
		DATETIME registro_instante
	}

	multa {
		BIGINT id
		BIGINT prestamo_id
		VARCHAR(20) motivo
		DECIMAL(10,2) valor
		VARCHAR(20) estado
		DATETIME registro_instante
	}

	ventana {
		BIGINT id
		BIGINT solicitud_id
		BIGINT item_existencia_id
		DATETIME inicio
		DATETIME fin
	}

	lista_espera {
		BIGINT id
		BIGINT solicitud_id
		BIGINT item_id
		DATETIME fecha_ingreso
		VARCHAR(20) estado
		DATETIME registro_instante
	}

	configuracion_sistema {
		BIGINT id
		VARCHAR(50) clave
		VARCHAR(100) valor
		TEXT descripcion
		DATETIME registro_instante
	}
```